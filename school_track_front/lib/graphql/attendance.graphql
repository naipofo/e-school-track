query GetAttendance {
  classes {
    attendances(where: { type: { _neq: "present" } }) {
      type
      date
      period_id
    }
    subject {
      title
    }
  }
}

subscription CheckAttendanceCount(
  $class_id: Int!
  $date: date!
  $period_id: Int!
) {
  attendance_aggregate(
    where: {
      class_id: { _eq: $class_id }
      date: { _eq: $date }
      period_id: { _eq: $period_id }
    }
  ) {
    aggregate {
      count
    }
  }
}
